<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head profile="http://dublincore.org/documents/2008/08/04/dc-html/">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="robots" content="index,follow" />
    <meta name="creator" content="rfcmarkup version 1.109" />
    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" />
<meta name="DC.Identifier" content="urn:ietf:id:baker-ipv6-ospf-dst-flowlabel-routing" />
<meta name="DC.Description.Abstract" content="This note describes the changes necessary for OSPF to route IPv6\ntraffic specified prefix if and only if the packet contains an\nauthorization token." />
<meta name="DC.Creator" content="Fred Baker &lt;fred@cisco.com&gt;" />
<meta name="DC.Date.Issued" content="2013-08-28" />
<meta name="DC.Title" content="Using OSPFv3 with Token-based Access Control" />

    <link rel="icon" href="/images/id.png" type="image/png" />
    <link rel="shortcut icon" href="/images/id.png" type="image/png" />
    <title>draft-baker-ipv6-ospf-dst-flowlabel-routing-03 - Using OSPFv3 with Token-based Access Control</title>
    
    
    <style type="text/css">
	body {
	    margin: 0px 8px;
            font-size: 1em;
	}
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->

    <script type="text/javascript"><!--
    function addHeaderTags() {
	var spans = document.getElementsByTagName("span");
	for (var i=0; i < spans.length; i++) {
	    var elem = spans[i];
	    if (elem) {
		var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";		
                }
	    }
	}
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script>
</head>
<body onload="addHeaderTags()">
   <div style="height: 13px;">
      <div onmouseover="this.style.cursor='pointer';"
         onclick="showElem('legend');"
         onmouseout="hideElem('legend')"
	 style="height: 6px; position: absolute;"
         class="pre noprint docinfo bgred"
         title="Click for colour legend." >                                                                        </div>
      <div id="legend"
           class="docinfo noprint pre legend"
           style="position:absolute; top: 4px; left: 4ex; visibility:hidden; background-color: white; padding: 4px 9px 5px 7px; border: solid #345 1px; "
           onmouseover="showElem('legend');"
           onmouseout="hideElem('legend');">
      </div>
   </div>
<span class="pre noprint docinfo top">[<a href="../html/" title="Document search and retrieval page">Docs</a>] [<a href="https://tools.ietf.org/id/draft-baker-ipv6-ospf-dst-flowlabel-routing-03.txt" title="Plaintext version of this document">txt</a>|<a href="/pdf/draft-baker-ipv6-ospf-dst-flowlabel-routing-03.txt" title="PDF version of this document">pdf</a>|<a href="/id/draft-baker-ipv6-ospf-dst-flowlabel-routing-03.xml" title="XML source for this document">xml</a>|<a href="/id/draft-baker-ipv6-ospf-dst-flowlabel-routing-03.html" title="HTML version of this document, from XML2RFC">html</a>] [<a href='https://datatracker.ietf.org/doc/draft-baker-ipv6-ospf-dst-flowlabel-routing' title='IESG Datatracker information for this document'>Tracker</a>] [<a href="mailto:draft-baker-ipv6-ospf-dst-flowlabel-routing@tools.ietf.org?subject=draft-baker-ipv6-ospf-dst-flowlabel-routing%20" title="Send email to the document authors">Email</a>] [<a href="/rfcdiff?difftype=--hwdiff&amp;url2=draft-baker-ipv6-ospf-dst-flowlabel-routing-03.txt" title="Inline diff (wdiff)">Diff1</a>] [<a href="/rfcdiff?url2=draft-baker-ipv6-ospf-dst-flowlabel-routing-03.txt" title="Side-by-side diff">Diff2</a>] [<a href="/idnits?url=https://tools.ietf.org/id/draft-baker-ipv6-ospf-dst-flowlabel-routing-03.txt" title="Run an idnits check of this document">Nits</a>]      </span><br />
<span class="pre noprint docinfo">                                                                        </span><br />
<span class="pre noprint docinfo">Versions: <a href="./draft-baker-ipv6-ospf-dst-flowlabel-routing-00">00</a> <a href="./draft-baker-ipv6-ospf-dst-flowlabel-routing-01">01</a> <a href="./draft-baker-ipv6-ospf-dst-flowlabel-routing-02">02</a> <a href="./draft-baker-ipv6-ospf-dst-flowlabel-routing-03">03</a>                                                   </span><br />
<span class="pre noprint docinfo">                                                                        </span><br />
<pre>
Network Working Group                                         F.J. Baker
Internet-Draft                                             Cisco Systems
Intended status: Standards Track                         August 28, 2013
Expires: March 01, 2014


              <span class="h1">Using OSPFv3 with Token-based Access Control</span>
             <span class="h1">draft-baker-ipv6-ospf-dst-flowlabel-routing-03</span>

Abstract

   This note describes the changes necessary for OSPF to route IPv6
   traffic specified prefix if and only if the packet contains an
   authorization token.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of <a href="./bcp78">BCP 78</a> and <a href="./bcp79">BCP 79</a>.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at <a href="http://datatracker.ietf.org/drafts/current/">http://datatracker.ietf.org/drafts/current/</a>.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on March 01, 2014.

Copyright Notice

   Copyright (c) 2013 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to <a href="./bcp78">BCP 78</a> and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in <a href="#section-4">Section 4</a>.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents



<span class="grey">Baker                    Expires March 01, 2014                 [Page 1]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-2" id="page-2" href="#page-2" class="invisible"> </a>
<span class="grey">Internet-Draft      OSPF Source/Destination Routing          August 2013</span>



   <a href="#section-1">1</a>.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-2">2</a>
     <a href="#section-1.1">1.1</a>.  Requirements Language . . . . . . . . . . . . . . . . . .   <a href="#page-2">2</a>
   <a href="#section-2">2</a>.  Theory of Routing . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-2">2</a>
     <a href="#section-2.1">2.1</a>.  Dealing with ambiguity  . . . . . . . . . . . . . . . . .   <a href="#page-3">3</a>
     <a href="#section-2.2">2.2</a>.  Interactions with other constraints . . . . . . . . . . .   <a href="#page-3">3</a>
   3.  Extensions necessary for IPv6 Authenticated Routing in OSPF .   4
     <a href="#section-3.1">3.1</a>.  Authorization Token TLV . . . . . . . . . . . . . . . . .   <a href="#page-4">4</a>
   <a href="#section-4">4</a>.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   <a href="#page-4">4</a>
   <a href="#section-5">5</a>.  Security Considerations . . . . . . . . . . . . . . . . . . .   <a href="#page-4">4</a>
   <a href="#section-6">6</a>.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-5">5</a>
   <a href="#section-7">7</a>.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-5">5</a>
     <a href="#section-7.1">7.1</a>.  Normative References  . . . . . . . . . . . . . . . . . .   <a href="#page-5">5</a>
     <a href="#section-7.2">7.2</a>.  Informative References  . . . . . . . . . . . . . . . . .   <a href="#page-5">5</a>
   <a href="#appendix-A">Appendix A</a>.  Change Log . . . . . . . . . . . . . . . . . . . . .   <a href="#page-5">5</a>
   Author's Address  . . . . . . . . . . . . . . . . . . . . . . . .   <a href="#page-5">5</a>

<span class="h2"><a class="selflink" name="section-1" href="#section-1">1</a>.  Introduction</span>

   This specification builds on OSPF for IPv6 [<a href="./rfc5340" title="&quot;OSPF for IPv6&quot;">RFC5340</a>] and its
   extensible LSA, defined in OSPFv3 LSA Extendibility
   [<a href="#ref-I-D.acee-ospfv3-lsa-extend">I-D.acee-ospfv3-lsa-extend</a>].  This note defines the TLV for an IPv6
   [<a href="./rfc2460" title="&quot;Internet Protocol, Version 6 (IPv6) Specification&quot;">RFC2460</a>] Flow Label, to define routes from to a destination prefix
   qualified by an authorization token.

   The approach may be combined with other qualifying attributes, such
   as routing "to that destination AND from a specified source".  The
   obvious application is data center inter-tenant routing using a form
   of token-based access control.  If the sender doesn't know the value
   to insert in the flow label or hop-by-hop option (the receiver's
   tenant ID), he in effect has no route to that destination.

<span class="h3"><a class="selflink" name="section-1.1" href="#section-1.1">1.1</a>.  Requirements Language</span>

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [<a href="./rfc2119" title="&quot;Key words for use in RFCs to Indicate Requirement Levels&quot;">RFC2119</a>].

<span class="h2"><a class="selflink" name="section-2" href="#section-2">2</a>.  Theory of Routing</span>

   Both IS-IS and OSPF perform their calculations by building a lattice
   of routers and links from the router performing the calculation to
   each router, and then use routes (sequences in the lattice) to get to
   destinations that those routes advertise connectivity to.  Following
   the SPF algorithm, calculation starts by selecting a starting point
   (typically the router doing the calculation), and successively adding
   {link, router} pairs until one has calculated a route to every router
   in the network.  As each router is added, including the original



<span class="grey">Baker                    Expires March 01, 2014                 [Page 2]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-3" id="page-3" href="#page-3" class="invisible"> </a>
<span class="grey">Internet-Draft      OSPF Source/Destination Routing          August 2013</span>


   router, destinations that it is directly connected to are turned into
   routes in the route table: "to get to 2001:db8::/32, route traffic to
   {interface, list of next hop routers}".  For immediate neighbors to
   the originating router, of course, there is no next hop router;
   traffic is handled locally.

   In this context, the route is qualified by an authorization token,
   carried in the flow label or a hop-by-hop option; It is installed
   into the FIB with the destination prefix, and the FIB applies the
   route if and only if the token in the packet matches the token in the
   route.  Of course, there may be multiple LSPs in the RIB with the
   same destination and differing authorization tokens; these may also
   have the same or differing next hop lists.  The intended forwarding
   action is to forward matching traffic to one of the next hop routers
   associated with this destination and authorization tokens, or to
   discard non-matching traffic as "destination unreachable".

   LSAs that lack an authorization token TLV match any token that may be
   present, by definition.

<span class="h3"><a class="selflink" name="section-2.1" href="#section-2.1">2.1</a>.  Dealing with ambiguity</span>

   In any routing protocol, there is the possibility of ambiguity.  For
   example, one router might advertise a fairly general prefix - a
   default route, a discard prefix (which consumes all traffic that is
   not directed to an instantiated subnet), or simply an aggregated
   prefix while another router advertises a more specific one.  In
   source/destination routing, potentially ambiguous cases include cases
   in which the link state database contains two routes A-&gt;B' and A'-&gt;B,
   in which A' is a more specific prefix within the prefix A and B' is a
   more specific prefix within the prefix B.  Traditionally, we have
   dealt with ambiguous destination routes using a "longest match first"
   rule.  If the same datagram matches more than one destination prefix
   advertised within an area, we follow the route with the longest
   matching prefix.

   In this case, we follow a similar but slightly different rule; the
   FIB lookup MUST yield the route with the longest matching destination
   prefix that also matches the authorization token.  A FIB route with
   no such token matches any authorization token.

<span class="h3"><a class="selflink" name="section-2.2" href="#section-2.2">2.2</a>.  Interactions with other constraints</span>

   In the event that there are other constraints on routing, such as
   proposed in [<a href="#ref-I-D.baker-ipv6-ospf-dst-src-routing">I-D.baker-ipv6-ospf-dst-src-routing</a>], the effect is a
   logical AND.  The FIB lookup must yield the route with the longest
   matching destination prefix that also matches each of the
   constraints.



<span class="grey">Baker                    Expires March 01, 2014                 [Page 3]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-4" id="page-4" href="#page-4" class="invisible"> </a>
<span class="grey">Internet-Draft      OSPF Source/Destination Routing          August 2013</span>


<span class="h2"><a class="selflink" name="section-3" href="#section-3">3</a>.  Extensions necessary for IPv6 Authenticated Routing in OSPF</span>

   <a href="./rfc5340#section-2">Section&nbsp;2 of [RFC5340]</a> defines the "IPv6 Reachability TLV", and
   carries in it destination prefix advertisements.  It has the
   capability of extension, using TLVs.

   In this model, the flow label is used to prove that the datagram's
   sender has specific knowledge of its intended receiver.  No proof is
   requested; this is left for higher layer exchanges such as IPSec or
   TLS.  However, if the information is distributed privately, such as
   through DHCP/DHCPv6, the network can presume that a system that marks
   traffic with the right flow label has a good chance of being
   authorized to communicate with its peer.

   The key consideration, in this context, is that the flow label is a
   20 bit number.  As such, an advertised route requiring a given flow
   label value is calling for an exact match of all 20 bits of the label
   value.

<span class="h3"><a class="selflink" name="section-3.1" href="#section-3.1">3.1</a>.  Authorization Token TLV</span>

   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      Type     |    Length     |  MBZ                          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       MBZ             |                 20 bit Flow Label     |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                           Source Prefix Sub-TLV

   Source Prefix Type:  assigned by IANA

   TLV Length:  Length of the TLV in octets

   Flow Label:  Flow Label value (20 bits)

<span class="h2"><a class="selflink" name="section-4" href="#section-4">4</a>.  IANA Considerations</span>

   The source prefix type mentioned in <a href="#section-3">Section 3</a> must be defined.

<span class="h2"><a class="selflink" name="section-5" href="#section-5">5</a>.  Security Considerations</span>

   Network layer Token-based Access Control is part of a security
   solution.  It is not, in itself, a complete solution.  It acts as a
   pervasive network layer firewall, preventing unauthorized traffic
   from arriving at a destination.  However, as in any network, a host
   is its own last bastion of defense; it needs IPsec or TLS-style



<span class="grey">Baker                    Expires March 01, 2014                 [Page 4]</span>
</pre><!--NewPage--><pre class='newpage'><a name="page-5" id="page-5" href="#page-5" class="invisible"> </a>
<span class="grey">Internet-Draft      OSPF Source/Destination Routing          August 2013</span>


   authorization and authorization of its peers, and must refuse traffic
   that contains the authorization token but is in fact malicious.

<span class="h2"><a class="selflink" name="section-6" href="#section-6">6</a>.  Acknowledgements</span>

<span class="h2"><a class="selflink" name="section-7" href="#section-7">7</a>.  References</span>

<span class="h3"><a class="selflink" name="section-7.1" href="#section-7.1">7.1</a>.  Normative References</span>

   [<a name="ref-I-D.acee-ospfv3-lsa-extend" id="ref-I-D.acee-ospfv3-lsa-extend">I-D.acee-ospfv3-lsa-extend</a>]
              Lindem, A., Mirtorabi, S., Roy, A., and F. Baker, "OSPFv3
              LSA Extendibility", <a href="./draft-acee-ospfv3-lsa-extend-00">draft-acee-ospfv3-lsa-extend-00</a> (work
              in progress), May 2013.

   [<a name="ref-RFC2119" id="ref-RFC2119">RFC2119</a>]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", <a href="./bcp14">BCP 14</a>, <a href="./rfc2119">RFC 2119</a>, March 1997.

   [<a name="ref-RFC2460" id="ref-RFC2460">RFC2460</a>]  Deering, S.E. and R.M. Hinden, "Internet Protocol, Version
              6 (IPv6) Specification", <a href="./rfc2460">RFC 2460</a>, December 1998.

   [<a name="ref-RFC5340" id="ref-RFC5340">RFC5340</a>]  Coltun, R., Ferguson, D., Moy, J., and A. Lindem, "OSPF
              for IPv6", <a href="./rfc5340">RFC 5340</a>, July 2008.

<span class="h3"><a class="selflink" name="section-7.2" href="#section-7.2">7.2</a>.  Informative References</span>

   [<a name="ref-I-D.baker-ipv6-ospf-dst-src-routing" id="ref-I-D.baker-ipv6-ospf-dst-src-routing">I-D.baker-ipv6-ospf-dst-src-routing</a>]
              Baker, F., "IPv6 Source/Destination Routing using OSPFv3",
              <a href="./draft-baker-ipv6-ospf-dst-src-routing-02">draft-baker-ipv6-ospf-dst-src-routing-02</a> (work in
              progress), May 2013.

<span class="h2"><a class="selflink" name="appendix-A" href="#appendix-A">Appendix A</a>.  Change Log</span>

   Initial Version:  February 2013

   updated Version:  August 2013

Author's Address

   Fred Baker
   Cisco Systems
   Santa Barbara, California  93117
   USA

   Email: fred@cisco.com






Baker                    Expires March 01, 2014                 [Page 5]

</pre><br />
<span class="noprint"><small><small>Html markup produced by rfcmarkup 1.109, available from
<a href="https://tools.ietf.org/tools/rfcmarkup/">https://tools.ietf.org/tools/rfcmarkup/</a>
</small></small></span>
</body></html>
